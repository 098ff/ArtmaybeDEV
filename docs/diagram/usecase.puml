@startuml
title Online Job Fair Registration System
left to right direction
skinparam shadowing false

actor User
actor "Registered User" as Reg
actor Admin

User <|-- Reg

rectangle "Service" {
  usecase "Login \n<b>POST /api/auth/login" as UC_Login
  usecase "Register \n<b>POST /api/auth/register" as UC_Register
  usecase "Logout \n<b>GET /api/auth/logout" as UC_Logout
  usecase "get Me \n<b>GET /api/me" as UC_GetMe

  usecase "Book Interview Session \n<b>POST /api/companies/{companyId}/bookings" as UC_Book
  usecase "View Own Bookings \n<b>GET /api/bookings" as UC_ViewOwn
  usecase "Edit Own Booking\n<b>PUT /api/bookings/{id}" as UC_EditOwn
  usecase "Delete Own Booking\n<b>DELETE /api/bookings/{id}" as UC_DeleteOwn

  usecase "View Company List \n<b>GET /api/companies" as UC_Companies
  usecase "View Company Detail \n<b>GET /api/companies/{id}" as UC_CompanyDetail
  usecase "Search Companies by Distance \n<b>GET /api/companies/search/dist" as UC_CompanyDist

  usecase "Add Favorite \n<b>POST /api/me/favorites" as UC_FavAdd
  usecase "View Favorites \n<b>GET /api/me/favorites/" as UC_FavList
  usecase "Remove Favorite \n<b>DELETE /api/me/favorites/{companyId}" as UC_FavDel

  usecase "View Any Booking \n<b>GET /api/bookings" as UC_ViewAny
  usecase "Edit Any Booking \n<b>PUT /api/bookings/{id}" as UC_EditAny
  usecase "Delete Any Booking \n<b>DELETE /api/bookings/{id}" as UC_DeleteAny
}

' Associations
User --> UC_Login
User --> UC_Register
User --> UC_Logout
User --> UC_Companies
User --> UC_CompanyDetail

Reg --> UC_GetMe
Reg --> UC_Book
Reg --> UC_ViewOwn
Reg --> UC_EditOwn
Reg --> UC_DeleteOwn
Reg --> UC_Companies
Reg --> UC_CompanyDetail
Reg --> UC_CompanyDist
Reg --> UC_FavAdd
Reg --> UC_FavList
Reg --> UC_FavDel

Admin --> UC_ViewAny
Admin --> UC_EditAny
Admin --> UC_DeleteAny
Admin --> UC_Companies
Admin --> UC_CompanyDetail
Admin --> UC_CompanyDist

' Notes / Constraints
note right of UC_Book
  Limited to 3 bookings max
  Admin cannot book
end note

note right of UC_Companies
  Company info includes:
  - name, address, website
  - email, phone
  - location (GeoJSON)
end note

note right of UC_FavAdd
  If already favorited -> returns existing with duplicate=true
end note
@enduml
